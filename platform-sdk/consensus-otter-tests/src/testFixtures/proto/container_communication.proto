syntax = "proto3";

package org.hiero.otter.fixtures.container.proto;

// SPDX-License-Identifier: Apache-2.0
import "platform/state/platform_state.proto";

message Empty {}

option java_multiple_files = true;

// Request to initialize the container.
message InitRequest {
  // ID of the node.
  com.hedera.hapi.platform.state.NodeId self_id = 1;
}

// Request to kill the application immediately.
message KillImmediatelyRequest {
  uint32 timeout_seconds = 1;
}

message PingResponse {
  bool alive = 1;
}

// Service definition for controlling the lifecycle of the consensus node.
service ContainerControlService {
  // RPC to initialize the container with the node ID.
  rpc Init(InitRequest) returns (Empty);

  // RPC to kill the consensus node app, but not shutdown the container. The dispatcher will still operate for remote calls
  rpc KillImmediately(KillImmediatelyRequest) returns (Empty);

  // RPC to check if the consensus node process is alive
  rpc NodePing(Empty) returns (PingResponse);
}
