# CITR Environment Configuration

## Overview

This document outlines the configuration settings for the CITR (Continuous Integration Test & Release) environment used in our workflows. The CITR environment is designed to facilitate automated testing and deployment processes.

There are several test suites that are run in the CITR environment, each with its own configuration settings. The main test suites include:

| Test Suite  |             Name              |                                      Description                                       | Automated |
|-------------|-------------------------------|----------------------------------------------------------------------------------------|-----------|
| MATS        | Minimal Acceptable Test Suite | Basic checks against main branch when changes are made                                 | X         |
| XTS         | Extended Test Suite           | More comprehensive tests run on a scheduled basis                                      | X         |
| SDCT        | Single Day Canonical Tests    | More comprehensive tests that focus on load, throughput, etc                           | X         |
| SDLT        | Single Day Longevity Tests    | Longevity tests to ensure stability over extended periods                              | X         |
| SDPT        | Single Day Performance Tests  | Performance-focused tests to evaluate system responsiveness                            | X         |
| MDLT        | Multi Day Longevity Tests     | Extended longevity tests over multiple days                                            |           |
| Shortgevity | Short Longevity Tests         | Short-term longevity tests for checking performance against a mainnet-like environment |           |

## MATS

### Environment

- MATS runs inside of self-hosted github runners on every *push* to the **default branch** (`main`).
- MATS is expected to complete within 30 minutes of the test suite starting.
- MATS has an equivalent set of tests that run in PRs against feature branches triggered on *pull_request* events.

### Workflows

- MATS is triggered by the [Node: Build Application](/.github/workflows/node-flow-build-application.yaml) workflow.
- The PR Check equivalent checks are triggered by the [Node: PR Checks](/.github/workflows/node-flow-pull-request-checks.yaml) workflow.

### Included Tests

|                Test Name                 |                                              Workflow                                               |                                           Required Parameters                                           |                                               Required Workflow Secrets                                               |            Precursor Steps            |
|------------------------------------------|-----------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------------------------------|
| Compile Code                             | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   |                                                                                                         | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                |                                       |
| Dependency (Module Info)                 | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-dependency-check: true`                                                                         | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Code Compiles                         |
| Spotless                                 | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-spotless-check: true`                                                                           | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Code Compiles                         |
| MATS - Unit Tests                        | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-unit-tests: true`                                                                               | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`<br/>`codacy-project-token`<br/>`codecov-token` | Dependency (Module Info)<br/>Spotless |
| MATS - Integration Tests                 | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-integration-tests: true`<br/>`enable-network-log-capture: true`                                 | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Misc)                 | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-misc: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS`           | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Misc Records)         | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-misc-records: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS`   | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Crypto)               | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-crypto: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS`         | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Simple Fees)          | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-simplefees: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS`     | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (ISS)                  | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-iss: true`<br/>`enable-network-log-capture: true`                                    | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Token)                | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-token: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS`          | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Smart Contract)       | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-smart-contract: true`<br/>`enable-network-log-capture: true`<br/>`mats-suffix: MATS` | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Restart)              | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-restart: true`<br/>`enable-network-log-capture: true`                                | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - HAPI Tests (Node Death Reconnect) | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-hapi-tests-nd-reconnect: true`<br/>`enable-network-log-capture: true`                           | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - Otter Tests                       | [ZXC: Execute Otter Tests](/.github/workflows/zxc-execute-otter-tests.yaml)                         | `enable-fast-otter-tests: true`<br/>`enable-network-log-capture: true`                                  | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                | Dependency (Module Info)<br/>Spotless |
| MATS - Spotless Check                    | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-spotless-check: true`                                                                           | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`<br/>`snyk-token`                               | Dependency (Module Info)<br/>Spotless |
| MATS - Snyk Scan                         | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml)   | `enable-snyk-scan: true`                                                                                | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`<br/>`snyk-token`                               | Dependency (Module Info)<br/>Spotless |
| MATS - Gradle Determinism                | [ZXC: Verify Gradle Build Determinism](/.github/workflows/zxc-verify-gradle-build-determinism.yaml) | `ref: <commit-sha>`                                                                                     | `gradle-cache-username`<br/>`gradle-cache-password`                                                                   | Dependency (Module Info)<br/>Spotless |
| MATS - Docker Determinism                | [ZXC: Verify Docker Build Determinism](/.github/workflows/zxc-verify-docker-build-determinism.yaml) | `ref: <commit-sha>`                                                                                     | `gradle-cache-username`<br/>`gradle-cache-password`                                                                   | Dependency (Module Info)<br/>Spotless |

## XTS

### Environment

- XTS runs inside of self-hosted github runners every 3 hours on the **default branch** (`main`).
- XTS is expected to complete within 3 hours of the test suite starting.
- XTS has a dry-run equivalent that can be run against any PR, tag, or branch.

### Workflows

- XTS is triggered by the [ZXCron: [CITR] Extended Test Suite](/.github/workflows/zxcron-extended-test-suite.yaml) workflow.
- XTS Dry Run is triggered manually via the [ZXF: [CITR] XTS Dry Run](/.github/workflows/zxf-dry-run-extended-test-suite.yaml) workflow.

### Included Tests

|                 Test Name                 |                                             Workflow                                              |                                                                                                                                                     Required Parameters                                                                                                                                                     |                                                                                                                Required Workflow Secrets                                                                                                                 |   Precursor Steps   |
|-------------------------------------------|---------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| XTS Timing Sensitive Tests                | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml) | `enable-timing-sensitive-tests: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                        | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| XTS Time Consuming Tests                  | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml) | `enable-time-consuming-tests: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                          | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| XTS Hammer Tests                          | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml) | `enable-hammer-tests: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                                  | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| XTS HAPI Tests (Time Consuming)           | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml) | `enable-hapi-tests-time-consuming: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                     | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| XTS HAPI Tests (Block Node Communication) | [ZXC: [Node] Compile Application Code](/.github/workflows/node-zxc-compile-application-code.yaml) | `enable-hapi-tests-bn-communication: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                   | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| XTS Otter Tests                           | [ZXC: Execute Otter Tests](/.github/workflows/zxc-execute-otter-tests.yaml)                       | `enable-full-otter-tests: true`<br/>`enable-network-log-capture: true`<br/>`ref: <commit-sha>`                                                                                                                                                                                                                              | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`                                                                                                                                                                                   | Fetch XTS Candidate |
| JRS Panel                                 | [ZXC: Regression](/.github/workflows/zxc-jrs-regression.yaml)                                     | `panel-config: configs/suites/GCP-PRCheck-Abbrev-4N.json`<br/>`ref: <commit-sha>`<br/>`branch-name: <github.head_ref or github.ref_name>`<br/>`base-branch-name: github.base_ref or ''`<br/>`slack-results-channel: regression-test`<br/>`slack-summary-channel: regression-test`<br/>`use-branch-for-slack-channel: false` | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`<br/>`jrs-ssh-user-name`<br/>`jrs-ssh-key-file`<br/>`gcp-project-number`<br/>`gcp-sa-key-contents`<br/>`slack-api-token`<br/>`grafana-agent-username`<br/>`grafana-agent-password` | Fetch XTS Candidate |
| Hedera Node JRS Panel                     | [ZXC: Regression](/.github/workflows/zxc-jrs-regression.yaml)                                     | `panel-config: configs/services/suites/daily/GCP-Daily-Services-Abbrev-DAB-Update-4N-2C.json`<br/>`ref: <commit-sha>`<br/>`branch-name: <github.head_ref or github.ref_name>`<br/>`hedera-tests-enabled: true`<br/>`use-branch-for-slack-channel: false`                                                                    | `access-token`<br/>`gradle-cache-username`<br/>`gradle-cache-password`<br/>`jrs-ssh-user-name`<br/>`jrs-ssh-key-file`<br/>`gcp-project-number`<br/>`gcp-sa-key-contents`<br/>`slack-api-token`<br/>`grafana-agent-username`<br/>`grafana-agent-password` | Fetch XTS Candidate |
| SDK TCK Regression Panel                  | [ZXC: TCK Regression](/.github/workflows/zxc-tck-regression.yaml)                                 | `ref: <commit-sha>`<br/>`solo-version: vars.CITR_SOLO_VERSION`                                                                                                                                                                                                                                                              | `access-token`<br/>`slack-tck-report-webhook`<br/>`slack-detailed-report-webhook`                                                                                                                                                                        | Fetch XTS Candidate |
| Mirror Node Regression Panel              | [ZXC: Mirror Node Regression](/.github/workflows/zxc-mirror-node-regression.yaml)                 | `ref: <commit-sha>`<br/>`solo-version: vars.CITR_SOLO_VERSION`<br/>`helm-release-name: mirror or mirror-1`                                                                                                                                                                                                                  | `access-token`<br/>`slack-detailed-report-webhook`                                                                                                                                                                                                       | Fetch XTS Candidate |
| JSON-RPC Relay Regression Panel           | [ZXC: JSON-RPC Relay Regression](/.github/workflows/zxc-json-rpc-relay-regression.yaml)           | `ref: <commit-sha>`<br/>`solo-version: vars.CITR_SOLO_VERSION`                                                                                                                                                                                                                                                              | `access-token`<br/>`slack-detailed-report-webhook`                                                                                                                                                                                                       | Fetch XTS Candidate |
| Block Node Regression Panel               | [ZXC: Block Node Explorer Regression](/.github/workflows/zxc-block-node-regression.yaml)          | `ref: <commit-sha>`<br/>`solo-version: vars.CITR_SOLO_VERSION`                                                                                                                                                                                                                                                              | `access-token`<br/>`slack-detailed-report-webhook`                                                                                                                                                                                                       | Fetch XTS Candidate |

## SDCT

## SDLT

## SDPT

## MDLT

## Shortgevity
